using System;
using System.Collections.Generic;
using TMPro;
using UnityEngine;
using UnityEngine.UI;

/// <summary>
/// Script to be put on the vulnerabilities menu, where vulnerabilities are added
/// </summary>


public class VulnerabilityMenu : MonoBehaviour
{
    [Header("Populating the vulnerability menu")]
    public TMP_Text componentName;
    public List<String> displayedVulnerabilities;
    private Dropdown availableVulnerabilitiesDropdown;
    private List<int> availableVulnerabilities;

    // Start is called before the first frame update
    void Start()
    {
        componentName = this.gameObject.transform.Find("ComponentNameText").GetComponent<TMP_Text>();
        componentName.text = "";

        availableVulnerabilitiesDropdown = GetComponentInChildren<Dropdown>();
        availableVulnerabilities = new List<int>();
        availableVulnerabilities.Add(123);
        availableVulnerabilities.Add(2);
        availableVulnerabilities.Add(4563);
        availableVulnerabilities.Add(8989898);
        PopulateVulnerabilityDropdown(availableVulnerabilitiesDropdown, availableVulnerabilities);
    }


    private void PopulateVulnerabilityDropdown(Dropdown dropdown, List<int> OptionsArray)
    {
        displayedVulnerabilities = new List<string>();
        foreach (int option in OptionsArray)
        {
            displayedVulnerabilities.Add(option.ToString());
        }

        if (dropdown != null)
        {
            dropdown.ClearOptions();
        }
        dropdown.AddOptions(displayedVulnerabilities);
    }


    public void PopulateVulnerabilityMenu(string name)
    {
        componentName.text = name;
    }
}
